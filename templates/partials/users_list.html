{% if users %}
<div class="overflow-x-auto">
    <table class="table">
        <thead>
            <tr class="text-base-content/60">
                <th>User</th>
                <th>Role</th>
                <th>Email</th>
                <th>Jobs Assigned</th>
                <th class="w-32"></th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr class="hover:bg-base-300/30" data-testid="row-user-{{ user.id }}">
                <td>
                    <div class="flex items-center gap-3">
                        <div class="avatar placeholder">
                            <div class="bg-purple-500/20 text-purple-400 rounded-full w-10">
                                <span>{{ user.username[0].upper() }}</span>
                            </div>
                        </div>
                        <div>
                            <div class="font-bold">{{ user.full_name or user.username }}</div>
                            <div class="text-sm text-base-content/60">@{{ user.username }}</div>
                        </div>
                    </div>
                </td>
                <td>
                    <span class="badge {% if user.role == 'Admin' %}badge-primary{% else %}badge-ghost{% endif %}">
                        {{ user.role }}
                    </span>
                </td>
                <td class="text-base-content/60">{{ user.email or '-' }}</td>
                <td>{{ user.job_assignments|length }}</td>
                <td>
                    <div class="flex gap-2">
                        <a href="{{ url_for('edit_user', user_id=user.id) }}" class="btn btn-ghost btn-sm" data-testid="button-edit-{{ user.id }}">
                            <i class="fas fa-edit"></i>
                        </a>
                        {% if user.id != current_user.id %}
                        <form hx-post="{{ url_for('delete_user', user_id=user.id) }}" hx-target="#users-list" hx-swap="innerHTML" hx-confirm="Delete this user?">
                            <button type="submit" class="btn btn-ghost btn-sm text-error" data-testid="button-delete-{{ user.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card bg-base-200 shadow-lg">
    <div class="card-body items-center text-center py-12">
        <i class="fas fa-users text-5xl text-base-content/30 mb-4"></i>
        <h3 class="text-xl font-semibold text-base-content/60">No users yet</h3>
        <p class="text-base-content/40">Add team members to get started</p>
    </div>
</div>
{% endif %}
